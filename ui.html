<h2>Test</h2>
<form action="">
  <div class="main-container">
    <div class="setHexNameValue">

      <label for="valueHexField">Hex#</label>
      <input type="text" name="valueHexField" id="hexField" size="4">
      <label for="colorNameField">Name Value:</label>
      <input type="text" name="colorNameField" id="nameField" size="20">
    
    </div>

    <div class="btnGroup">
          <button id="btnAdd">+</button>
      </div>

    <div class="options-check">

      <label for="colorHexField">Include hex (only):</label>
      <input type="checkbox" name="" id="includeHexCode">
      <label for="colorNameField">Include names (only):</label>
      <input type="checkbox" name="" id="includeName">
      <label for="colorHexNameField">Include none:</label>
      <input type="checkbox" name="" id="includeNone">
      <button type="submit" id="btnIniate">Test</button>

    </div>

    <div class="hex-to-be-paleted">
      

    </div>

  </div>
</form>
<script>

const hexContainer = document.querySelector('.hex-to-be-paleted')

const inputField = document.getElementById('txtField');
const btnInitiate = document.getElementById('btnIniate')
const hexValueField = document.getElementById('hexField');
const btnAdd = document.getElementById('btnAdd')
const nameValueField = document.getElementById('nameField');


const optionIncludeHex = document.getElementById('includeHexCode');
const optionIncludeName = document.getElementById('includeName');
const optionIncludNone = document.getElementById('includeNone');
/////////////////////
const colorPaletteObjects = [];
///////////////////////




function colorPaletteArray(){

  const hexValue =  hexValueField.value;
  const nameValue = nameValueField.value;

  colorPaletteObjects.unshift({
                                hexCode: hexValue,
                                hexName: nameValue ? nameValue : null,
                                id: Date.now(), //track btn

                              })
 
 
  //Paletes to be created container visual
  const currentAddedHex = document.createElement("div");
  const currentAddedHexTitle = document.createElement("p");
  const deleteBtn = document.createElement("button")
  currentAddedHex.textContent = hexValueField.value;
  deleteBtn.textContent = 'Delete'
  deleteBtn.id = Date.now();
  

  currentAddedHex.appendChild(currentAddedHexTitle);
  currentAddedHex.appendChild(deleteBtn)
  // const hexBlock = document.createElement("div")
  currentAddedHexTitle.className = "hexBlock"

// hexContainer.appendChild(currentAddedHex)
  hexContainer.firstChild ? 
  hexContainer.insertBefore(currentAddedHex, hexContainer.firstChild) : hexContainer.appendChild(currentAddedHex)

  hexValueField.value = ""
  nameValueField.value = ""
  return colorPaletteObjects

}

const testtesttest = document.querySelector(".main-container");

testtesttest.addEventListener("click", (e)=>{
  

  if(e.target.id === "btnAdd"){

    e.preventDefault()
    colorPaletteArray() ///Adds color to arrayList
    
  }

  if(e.target.id === "btnIniate"){

      e.preventDefault()

    const hexValue =  hexValueField.value;
    const nameValue = nameValueField.value;
    const includeHex = optionIncludeHex;
    const includeName = optionIncludeName;
    const includeNone = optionIncludNone;
 

    parent.postMessage({ pluginMessage: { 

                        setHexValue: hexValue, 
                        setNameText: nameValue,
                        colorPaletteObjects: colorPaletteObjects,
                        optionHex: includeHex.checked ? true : false,
                        optionName: includeName.checked ? true : false,
                        optionNone: includeNone.checked ? true : false,
                                        
                                        } }, '*')

  }

  for(let i = 0; i < colorPaletteObjects.length; i++){

      if(e.target.id == colorPaletteObjects[i].id){
        e.preventDefault()
        e.target.closest('div').remove()
        colorPaletteObjects.splice(i,1)
  }

  }

})

</script>
